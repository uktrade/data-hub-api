{% load govuk_frontend_django %}

{% if count %}
<h2 class="govuk-heading-m">{{ count }} Companies</h2>
{% else %}
<h2 class="govuk-heading-m">0 Companies</h2>
{% endif %}

{% for result in results %}
<h3 class="govuk-heading-s">{{ result.name }}</h3>
<sub class="">Updated on {{ result.modified_on }}</sub>
<ul class="govuk-list">
  {% if result.sector %}
      <li class="govuk-body">Sector: {{ result.sector.name }}</li>
  {% endif %}
  {% if result.global_headquarters %}
      <li class="govuk-body">Global Headquarters: {{ result.global_headquarters.name }}</li>
  {% endif %}
  {% if result.address %}
    {% set address = [result.address.line_1, result.address.line_2] %}
    {% endset %}
    {% set address_text = {{address.join(', ')}} %}
    {% endset %}
    <li class="govuk-body">Address: {{ address_text }}</li>
    <li class="govuk-body">Address: {{ result.address.line_1 }}, {{ result.address.line_2 }}, {{ result.town }}, {{ result.postcode }}, {{ result.country.name }}</li>
    {% endif %}
  {% if result.trading_names %}
      <li class="govuk-body">Trading names: {{ result.trading_names }}</li>
  {% endif %}
  {% if result.latest_interaction_date %}
      <li class="govuk-body">Last interaction date: {{ result.latest_interaction_date }}</li>
  {% endif %}
  {% if result.headquarter_type %}
      <li class="govuk-body">Headquarter type: {{ result.headquarter_type.name }}</li>
  {% endif %}
</ul>
<hr>
{% endfor %}